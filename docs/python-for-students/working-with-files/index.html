<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Working with Files – Pedro Leitão</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../_static/logo.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-a185852c63625fd9ffbdc57047c9a77e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6b5169cd70b11e3ab71bd7bb77c8208f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/nutshell-1.0.7/nutshell.js"></script>
<script src="../../site_libs/quarto-contrib/nutshell-1.0.7/nutshell_options.js"></script>
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(../../_static/banner-waves-partial.jpg);
background-size: cover;
      }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script data-collect-dnt="true" async="" src="https://scripts.simpleanalyticscdn.com/latest.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Working with Files – Pedro Leitão">
<meta property="og:description" content="saving and loading data">
<meta property="og:image" content="https://pedroleitao.nl/_static/logo.jpg">
<meta property="og:site_name" content="Pedro Leitão">
<meta name="twitter:title" content="Working with Files – Pedro Leitão">
<meta name="twitter:description" content="saving and loading data">
<meta name="twitter:image" content="https://pedroleitao.nl/python-for-students/working-with-files/figures/series-dataframe.png">
<meta name="twitter:image:alt" content="Pandas Series and Dataframe">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../_static/logo.jpg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Bio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">All posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../experiments.html"> 
<span class="menu-text">Experiments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../thoughts.html"> 
<span class="menu-text">Thoughts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../howtos.html"> 
<span class="menu-text">Howto’s</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../python-for-students.html"> 
<span class="menu-text">Python for Students</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pedro-leitao"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/nunoleitao"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../posts.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Working with Files</h1>
            <p class="subtitle lead">saving and loading data</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-most-likely-file-formats-you-will-encounter" id="toc-the-most-likely-file-formats-you-will-encounter" class="nav-link active" data-scroll-target="#the-most-likely-file-formats-you-will-encounter">The most likely file formats you will encounter</a>
  <ul class="collapse">
  <li><a href="#first-some-basics" id="toc-first-some-basics" class="nav-link" data-scroll-target="#first-some-basics">First, some basics</a></li>
  <li><a href="#working-with-csv-files" id="toc-working-with-csv-files" class="nav-link" data-scroll-target="#working-with-csv-files">Working with CSV files</a></li>
  <li><a href="#writing-to-a-csv-file" id="toc-writing-to-a-csv-file" class="nav-link" data-scroll-target="#writing-to-a-csv-file">Writing to a CSV file</a></li>
  </ul></li>
  <li><a href="#pandas-and-files" id="toc-pandas-and-files" class="nav-link" data-scroll-target="#pandas-and-files">Pandas, and files</a>
  <ul class="collapse">
  <li><a href="#what-is-pandas-and-what-is-it-for" id="toc-what-is-pandas-and-what-is-it-for" class="nav-link" data-scroll-target="#what-is-pandas-and-what-is-it-for">What is Pandas and what is it for ?</a></li>
  <li><a href="#reading-files-with-pandas" id="toc-reading-files-with-pandas" class="nav-link" data-scroll-target="#reading-files-with-pandas">Reading files with Pandas</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>The most common way for anyone to share data is through <em>files</em>. Because you are using a computer, one can safelly assume that you have already worked with files, but there’s a lot more to learn about them if you want to become proficient in software and if you want to be able to programmatically use and create files.</p>
<section id="the-most-likely-file-formats-you-will-encounter" class="level2">
<h2 class="anchored" data-anchor-id="the-most-likely-file-formats-you-will-encounter">The most likely file formats you will encounter</h2>
<p>Python can be used to work with a wide variety of file formats, but the most common ones if you are working with data are <code>csv</code>, <code>xls</code> and possibly some <code>json</code>.</p>
<p>There are many other files formats that you can encounter and work with, but if you get going with these three, you will be able to work with most of the data you will encounter with enough practice!</p>
<section id="first-some-basics" class="level3">
<h3 class="anchored" data-anchor-id="first-some-basics">First, some basics</h3>
<p>Before we start working with files, let’s first understand some basic concepts:</p>
<ul>
<li><em>File</em>: A file is a collection of data stored in a disk with a specific name and a specific format.</li>
<li><em>File Format</em>: A file format is a standard way that information is encoded for storage in a computer file.</li>
<li><em>File Path</em>: A file path is the human-readable representation of the location of a file in a computer.</li>
<li><em>File Extension</em>: A file extension is a suffix at the end of a filename that indicates what type of file it is.</li>
</ul>
<p>If we take an example, the file path <code>C:\Users\JohnDoe\Documents\example.txt</code> is a file path that points to a file named <code>example.txt</code> that is located in the <code>Documents</code> folder of the <code>JohnDoe</code> user in the <code>Users</code> folder of the <code>C:</code> drive. If you were using a Mac, the file path would look like <code>/Users/JohnDoe/Documents/example.txt</code>, and if you were using a Linux machine, it would look like <code>/home/JohnDoe/Documents/example.txt</code>.</p>
<p>The file extension is the <code>.txt</code> part of the file name, and it indicates that the file is a text file. A text file is a file that contains only text, and it can be opened and read by any text editor.</p>
<p>Any file which can be opened and read by a text editor is called a <em>text file</em>. However, a text file doesn’t have to have a <code>.txt</code> extension. For example, a <code>.csv</code> file is also a text file, but it has a <code>.csv</code> extension because it is a file that contains comma-separated values (<code>csv</code> stands for “Comma Separated Values”).</p>
<p>On the other hand, a <code>.xls</code> file is not a text file, it is a binary file that can only be opened and read by a program that understands the Excel file format, such as Microsoft Excel or Apple’s Numbers.</p>
<p>Text files such as <code>.txt</code> and <code>.csv</code> also have something called an <em>encoding</em>. An encoding is a way to represent text in a computer file. The most common encoding is <code>utf-8</code>, which is a standard way to represent text in a computer file. However, there are many other encodings, such as <code>ascii</code>, <code>latin-1</code>, <code>utf-16</code>, etc.</p>
<p>When you open a text file in a text editor, the text editor will automatically detect the encoding of the file and display the text correctly. However, when you open a text file in a program that doesn’t understand the encoding of the file, the text may be displayed incorrectly. If you encounter this problem (e.g., if you open a text file in Python and the text is displayed incorrectly), you may need to specify the encoding of the file when you open it. This should not happen often, but it is something to keep in mind.</p>
</section>
<section id="working-with-csv-files" class="level3">
<h3 class="anchored" data-anchor-id="working-with-csv-files">Working with CSV files</h3>
<p>A CSV file is a text file that contains comma-separated values. Each line in a CSV file represents a row of data, and the values in each row are separated by commas. For example, the following is a CSV file that contains information about some people:</p>
<pre><code>name,age,gender,nationality
John Doe,30,male,Great Britain
Jane Smith,27,female,New Zealand
Markus Müller,35,male,Germany</code></pre>
<p>You will notice that the first line of the file contains the names of the columns, and the subsequent lines contain the values of the columns. This is a common convention in CSV files, but it is not required. Some CSV files may not have column names, and some may have different delimiters (e.g., semicolons instead of commas).</p>
<p>To work with CSV files in Python, you can use the <code>csv</code> module (this is a builtin Python module), which provides functions for reading and writing CSV files. Here is an example of how you can read a CSV file in Python.</p>
<div id="07010581" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="07010581"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="07010581-1"><a href="#07010581-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="07010581-2"><a href="#07010581-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="07010581-3"><a href="#07010581-3" aria-hidden="true" tabindex="-1"></a><span class="bu">input</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">"people.csv"</span>, <span class="st">"r"</span>)</span>
<span id="07010581-4"><a href="#07010581-4" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> csv.DictReader(<span class="bu">input</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That is it! You loaded a CSV file into Python! You can now work with the data in the file as you would with any other data in Python, for example you can check which columns are in the file, you can filter the data, you can calculate statistics, etc.</p>
<p>In the above code, we used the <code>DictReader</code> method of the <code>csv</code> module to read the CSV file which we opened with <code>open('people.csv', 'r')</code> (the <code>r</code> just indicates we are opening the file for reading only). This method reads the CSV file and returns an iterator that yields a dictionary for each row of the file. The keys of the dictionary are the column names, and the values are the values of the columns.</p>
<p>You can check the column names of the CSV file by calling the <code>fieldnames</code> attribute of the <code>DictReader</code> object:</p>
<div id="c40b2451" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="c40b2451"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="c40b2451-1"><a href="#c40b2451-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(people.fieldnames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['name', 'age', 'gender', 'nationality']</code></pre>
</div>
</div>
<p>We can then iterate over the rows of the CSV file and print each row.</p>
<div id="7ed48629" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="7ed48629"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="7ed48629-1"><a href="#7ed48629-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="7ed48629-2"><a href="#7ed48629-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(person)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'name': 'John Doe', 'age': '30', 'gender': 'male', 'nationality': 'Great Britain'}
{'name': 'Jane Smith', 'age': '27', 'gender': 'female', 'nationality': 'New Zealand'}
{'name': 'Markus Müller', 'age': '35', 'gender': 'male', 'nationality': 'Germany'}</code></pre>
</div>
</div>
<p>Keep in mind that the rows are represented as dictionaries, so you can access the values of the columns by using the column names as keys.</p>
<div id="ef1a534c" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="ef1a534c"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="ef1a534c-1"><a href="#ef1a534c-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="ef1a534c-2"><a href="#ef1a534c-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(person[<span class="st">"name"</span>], person[<span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wait… why did the code above print nothing ?!?</p>
<p>The reason is that the <code>DictReader</code> object is an iterator, and iterators in Python are consumed when you iterate over them. This means that once you have iterated over the <code>DictReader</code> object, you cannot iterate over it again.</p>
<p>To iterate over the <code>DictReader</code> object multiple times, you need to read the file again into a <code>DictReader</code> object. When reading a CSV file using the <code>csv</code> module, it is common to read the file into a list of dictionaries, so that you can iterate over the list multiple times.</p>
<div id="eb592b22" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="eb592b22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="eb592b22-1"><a href="#eb592b22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset back to the beginning of the file</span></span>
<span id="eb592b22-2"><a href="#eb592b22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">input</span>.seek(<span class="dv">0</span>)</span>
<span id="eb592b22-3"><a href="#eb592b22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="eb592b22-4"><a href="#eb592b22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the file again, this time as a list of dictionaries</span></span>
<span id="eb592b22-5"><a href="#eb592b22-5" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> <span class="bu">list</span>(csv.DictReader(<span class="bu">input</span>))</span>
<span id="eb592b22-6"><a href="#eb592b22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="eb592b22-7"><a href="#eb592b22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the list of dictionaries...</span></span>
<span id="eb592b22-8"><a href="#eb592b22-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="eb592b22-9"><a href="#eb592b22-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(person)</span>
<span id="eb592b22-10"><a href="#eb592b22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="eb592b22-11"><a href="#eb592b22-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the list of dictionaries again...</span></span>
<span id="eb592b22-12"><a href="#eb592b22-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="eb592b22-13"><a href="#eb592b22-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(person[<span class="st">"name"</span>], person[<span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'name': 'John Doe', 'age': '30', 'gender': 'male', 'nationality': 'Great Britain'}
{'name': 'Jane Smith', 'age': '27', 'gender': 'female', 'nationality': 'New Zealand'}
{'name': 'Markus Müller', 'age': '35', 'gender': 'male', 'nationality': 'Germany'}
John Doe 30
Jane Smith 27
Markus Müller 35</code></pre>
</div>
</div>
<p>That’s better. And you’ve learned something new about iterators! In the example above we also reset the file pointer to the beginning of the file using the <code>seek(0)</code> method of the file object (<code>0</code> means beginning of the file). This is necessary because the file pointer is at the end of the file after reading the file, and we need to move it back to the beginning of the file to read the file again.</p>
</section>
<section id="writing-to-a-csv-file" class="level3">
<h3 class="anchored" data-anchor-id="writing-to-a-csv-file">Writing to a CSV file</h3>
<p>Just as you can read a CSV file using the <code>csv</code> module, you can also write to it. As an example, let us update our people list and write the updated list to a new CSV file.</p>
<div id="0317388c" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="0317388c"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0317388c-1"><a href="#0317388c-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the age of "Jane Smith" to 26</span></span>
<span id="0317388c-2"><a href="#0317388c-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="0317388c-3"><a href="#0317388c-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> person[<span class="st">"name"</span>] <span class="op">==</span> <span class="st">"Jane Smith"</span>:</span>
<span id="0317388c-4"><a href="#0317388c-4" aria-hidden="true" tabindex="-1"></a>        person[<span class="st">"age"</span>] <span class="op">=</span> <span class="dv">26</span></span>
<span id="0317388c-5"><a href="#0317388c-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="0317388c-6"><a href="#0317388c-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="0317388c-7"><a href="#0317388c-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(person)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'name': 'John Doe', 'age': '30', 'gender': 'male', 'nationality': 'Great Britain'}
{'name': 'Jane Smith', 'age': 26, 'gender': 'female', 'nationality': 'New Zealand'}
{'name': 'Markus Müller', 'age': '35', 'gender': 'male', 'nationality': 'Germany'}</code></pre>
</div>
</div>
<p>That worked well! Let us now take the <code>people</code> list and write it to a new CSV file.</p>
<div id="7516aa8c" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="7516aa8c"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="7516aa8c-1"><a href="#7516aa8c-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the updated data back to a new file</span></span>
<span id="7516aa8c-2"><a href="#7516aa8c-2" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> <span class="bu">open</span>(<span class="st">"people-updated.csv"</span>, <span class="st">"w"</span>)</span>
<span id="7516aa8c-3"><a href="#7516aa8c-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="7516aa8c-4"><a href="#7516aa8c-4" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> csv.DictWriter(output, fieldnames<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"nationality"</span>])</span>
<span id="7516aa8c-5"><a href="#7516aa8c-5" aria-hidden="true" tabindex="-1"></a>writer.writeheader()</span>
<span id="7516aa8c-6"><a href="#7516aa8c-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="7516aa8c-7"><a href="#7516aa8c-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> person <span class="kw">in</span> people:</span>
<span id="7516aa8c-8"><a href="#7516aa8c-8" aria-hidden="true" tabindex="-1"></a>    writer.writerow(person)</span>
<span id="7516aa8c-9"><a href="#7516aa8c-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="7516aa8c-10"><a href="#7516aa8c-10" aria-hidden="true" tabindex="-1"></a>output.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the above code, we used the <code>DictWriter</code> method of the <code>csv</code> module to write the <code>people</code> list to a new CSV file named <code>people_updated.csv</code>. We opened the file with <code>open('people_updated.csv', 'w')</code> (the <code>w</code> indicates we are opening the file for writing only), and we passed the column names to the <code>fieldnames</code> argument of the <code>DictWriter</code> object. We then wrote the column names to the file using the <code>writeheader</code> method of the <code>DictWriter</code> object, and we wrote the rows of the <code>people</code> list to the file using the <code>writerow</code> method of the <code>DictWriter</code> object. Finally, we closed the file using the <code>close</code> method of the file object.</p>
</section>
</section>
<section id="pandas-and-files" class="level2">
<h2 class="anchored" data-anchor-id="pandas-and-files">Pandas, and files</h2>
<p><a href="https://pandas.pydata.org">Pandas</a> is a powerful data manipulation library for Python that provides data structures and functions for working with structured data. One of the main features of Pandas is its ability to read and write data from and to a wide variety of file formats, including CSV, Excel, JSON, SQL, and many others.</p>
<p>While in the previous section we learned how to read and write CSV files using the <code>csv</code> module, in this section we will learn how to read and write CSV files using Pandas. It provides a much simpler and more powerful interface for working with files which hold the types of data you will likely encounter, and it will make your life much easier when working with data!</p>
<p>This doesn’t mean you should forget about the more lower level ways of working with files, but it is good to know that you have this option available to you, as it will probably be the most common way you will work with files in the future.</p>
<section id="what-is-pandas-and-what-is-it-for" class="level3">
<h3 class="anchored" data-anchor-id="what-is-pandas-and-what-is-it-for">What is Pandas and what is it for ?</h3>
<p>Pandas literally is the swiss army knife of data manipulation in Python. Together with <a href="https://numpy.org">Numpy</a> (which is a library for numerical computing in Python), it is the most used library for data manipulation in Python. It provides data structures and functions for working with structured data, and it is widely used in data science, machine learning, and other fields where data analysis is required.</p>
<p>The main data structure in Pandas is the <code>DataFrame</code>, which is a two-dimensional table of data with rows and columns. A <code>DataFrame</code> is similar to a spreadsheet in Excel or a table in a database, and it provides a powerful interface for working with structured data. You can think of a <code>DataFrame</code> as a collection of <code>Series</code> objects, where each <code>Series</code> object represents a column of the <code>DataFrame</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="figures/series-dataframe.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Pandas Series and Dataframe"><img src="figures/series-dataframe.png" class="img-fluid figure-img" alt="Pandas Series and Dataframe"></a></p>
<figcaption>Pandas Series and Dataframe</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
About DataFrames and Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>In data science, a <code>DataFrame</code> is the most common way to represent structured data, and it is used in many libraries and tools for data analysis, machine learning, and other tasks. If you are working with structured data in Python, you will likely be using <code>DataFrame</code> objects to represent the data. Besides <code>DataFrame</code>, Pandas also provides a <code>Series</code> object, which is a one-dimensional array of data with an index.</p>
</div>
</div>
<p>Anaconda already includes Pandas, so you shouldn’t need to install it. You can right away start using it in your Jupyter Notebooks. Let us create the series and the dataframe from the sales dataframe above as an example.</p>
<div id="24ac7fee" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="24ac7fee"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="24ac7fee-1"><a href="#24ac7fee-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="24ac7fee-2"><a href="#24ac7fee-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="24ac7fee-3"><a href="#24ac7fee-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a months series</span></span>
<span id="24ac7fee-4"><a href="#24ac7fee-4" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> pd.Series([<span class="st">"January"</span>, <span class="st">"February"</span>, <span class="st">"March"</span>, <span class="st">"April"</span>])</span>
<span id="24ac7fee-5"><a href="#24ac7fee-5" aria-hidden="true" tabindex="-1"></a>sales <span class="op">=</span> pd.Series([<span class="dv">180391</span>, <span class="dv">197156</span>, <span class="dv">193501</span>, <span class="dv">199468</span>])</span>
<span id="24ac7fee-6"><a href="#24ac7fee-6" aria-hidden="true" tabindex="-1"></a>sales_dataframe <span class="op">=</span> pd.DataFrame({<span class="st">"Month"</span>: months, <span class="st">"Sales"</span>: sales})</span>
<span id="24ac7fee-7"><a href="#24ac7fee-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="24ac7fee-8"><a href="#24ac7fee-8" aria-hidden="true" tabindex="-1"></a>sales_dataframe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Month</th>
<th data-quarto-table-cell-role="th">Sales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>January</td>
<td>180391</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>February</td>
<td>197156</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>March</td>
<td>193501</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>April</td>
<td>199468</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="reading-files-with-pandas" class="level3">
<h3 class="anchored" data-anchor-id="reading-files-with-pandas">Reading files with Pandas</h3>
<p>Pandas provides abstractions which make file handling much easier. For example, to read a CSV file into a <code>DataFrame</code>, you can use the <code>read_csv</code> function of Pandas. This function reads a CSV file and returns a <code>DataFrame</code> object that represents the data in the file. Let’s load the <code>people.csv</code> file into a <code>DataFrame</code>.</p>
<div id="75b486dc" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="75b486dc"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="75b486dc-1"><a href="#75b486dc-1" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> pd.read_csv(<span class="st">"people.csv"</span>)</span>
<span id="75b486dc-2"><a href="#75b486dc-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="75b486dc-3"><a href="#75b486dc-3" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">nationality</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>John Doe</td>
<td>30</td>
<td>male</td>
<td>Great Britain</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Jane Smith</td>
<td>27</td>
<td>female</td>
<td>New Zealand</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Markus Müller</td>
<td>35</td>
<td>male</td>
<td>Germany</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>That was super easy! A dataframe is a much more powerful way to work with data than a list of dictionaries, as it provides many more functions and methods to work with the data. For example, you can filter the data, you can calculate statistics, you can group the data, you can join the data with other data, etc.</p>
<p>For example, let us calculate the average age of the people in the <code>people</code> dataframe.</p>
<div id="32d9df33" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="32d9df33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="32d9df33-1"><a href="#32d9df33-1" aria-hidden="true" tabindex="-1"></a>average_age <span class="op">=</span> people[<span class="st">"age"</span>].mean()</span>
<span id="32d9df33-2"><a href="#32d9df33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="32d9df33-3"><a href="#32d9df33-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(average_age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>30.666666666666668</code></pre>
</div>
</div>
<p>Updating the <code>people</code> dataframe is also very easy. For example, let us update the age of the people in the <code>people</code> dataframe and write the updated dataframe to a new CSV file like before. First, we will update the dataframe. To do so, we will use the <code>loc</code> method of the <code>DataFrame</code> object - <code>loc</code> is used to access a group of rows and columns by labels.</p>
<div id="fe982312" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="fe982312"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="fe982312-1"><a href="#fe982312-1" aria-hidden="true" tabindex="-1"></a>people.loc[people[<span class="st">"name"</span>] <span class="op">==</span> <span class="st">"Jane Smith"</span>, <span class="st">"age"</span>] <span class="op">=</span> <span class="dv">26</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above code looks through a table of people, finds every entry where the person’s name is “Jane Smith,” and changes their age to 26. Much easier than working with a <code>for</code> loop like we did before.</p>
<p>We could also add a new row to the <code>people</code> dataframe. To do so, we will use the <code>concat</code> method of the <code>DataFrame</code> object.</p>
<div id="702d47c7" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="702d47c7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="702d47c7-1"><a href="#702d47c7-1" aria-hidden="true" tabindex="-1"></a>new_people <span class="op">=</span> pd.DataFrame(</span>
<span id="702d47c7-2"><a href="#702d47c7-2" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="702d47c7-3"><a href="#702d47c7-3" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="702d47c7-4"><a href="#702d47c7-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"name"</span>: <span class="st">"Florentino das Rosas"</span>,</span>
<span id="702d47c7-5"><a href="#702d47c7-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"age"</span>: <span class="dv">51</span>,</span>
<span id="702d47c7-6"><a href="#702d47c7-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"gender"</span>: <span class="st">"male"</span>,</span>
<span id="702d47c7-7"><a href="#702d47c7-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"nationality"</span>: <span class="st">"Portugal"</span>,</span>
<span id="702d47c7-8"><a href="#702d47c7-8" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="702d47c7-9"><a href="#702d47c7-9" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="702d47c7-10"><a href="#702d47c7-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="702d47c7-11"><a href="#702d47c7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="702d47c7-12"><a href="#702d47c7-12" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> pd.concat([people, new_people], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="702d47c7-13"><a href="#702d47c7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="702d47c7-14"><a href="#702d47c7-14" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">nationality</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>John Doe</td>
<td>30</td>
<td>male</td>
<td>Great Britain</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Jane Smith</td>
<td>26</td>
<td>female</td>
<td>New Zealand</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Markus Müller</td>
<td>35</td>
<td>male</td>
<td>Germany</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Florentino das Rosas</td>
<td>51</td>
<td>male</td>
<td>Portugal</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The way you add new rows to a dataframe is by concatenating an existing dataframe with a new dataframe that contains the new rows. In the above code, we created a new dataframe called <code>new_people</code> that contains a new row with the name “Florentino das Rosas,” age 51. We then concatenated the <code>people</code> dataframe with the <code>new_people</code> dataframe using the <code>concat</code> method of the <code>DataFrame</code> object, and we assigned the result to <code>people</code> again.</p>
<p><code>ignore_index=True</code> is used to ignore the index of the new dataframe you are adding (which will be <code>0</code>) and create a new sequential index for the concatenated dataframe. If you don’t use <code>ignore_index=True</code>, the index of the new <code>new_people</code> dataframe will be used as the index of the concatenated dataframe.</p>
<p>Let us now write the updated <code>people</code> dataframe to a new CSV file.</p>
<div id="d5841c14" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="d5841c14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="d5841c14-1"><a href="#d5841c14-1" aria-hidden="true" tabindex="-1"></a>people.to_csv(<span class="st">"people-updated.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can see, much more concise and easier to work with than the <code>csv</code> module. Later on, we will dive deeper into Pandas and learn more about its capabilities, but for now, this should be enough to get you started with working with files in Python.</p>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<ol type="1">
<li>Write a Python program that reads a CSV file containing information about mine exploration (with the columns <code>mine_name</code>, <code>location</code>, <code>tonnes_extracted</code>, <code>ore_grade</code>), and which calculates the total amount of ore extracted from all mines in the file. Use Pandas if you prefer.</li>
<li>Add a new row to the CSV file with the information of a new mine, and write the updated data to a new CSV file.</li>
</ol>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div>This work is licensed under CC BY <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">(View License)</a></div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/pedroleitao\.nl");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Written with love, take time to think and ponder.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://quarto.org">
      <i class="bi bi-arrow-through-heart" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="http://www.frankscanteen.com">
      <i class="bi bi-cup-hot" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/bilhanovarestaurante">
      <i class="bi bi-egg-fried" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>