{
  "hash": "5cc9833cc59c86da712c824a098e6bd2",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Error Handling and Debugging\nsubtitle: how to handle errors and debug your code\njupyter: python3\norder: 9\nformat:\n  html:\n    code-fold: false\n---\n\n\nPrograms can behave in unexpected ways. This can be due to a variety of reasons, such as incorrect input, unexpected conditions, or bugs in your code. There are a number of techniques you can use to help you identify and fix these issues, and to help you understand what your code is doing. This sections briefly covers some of these techniques and tools which you can use in the future to help you debug and understand your code.\n\n\n## Error handling\n\nError handling is the process of responding to and recovering from error conditions in your program. Error handling can help you identify and fix issues, and help you write more robust and reliable programs.\n\nWhen we say \"error\", we are referring to any unexpected condition that prevents your program from running correctly, we are *not* referring to syntax or logical errors. Syntax errors are caught by the Python interpreter when you attempt to run a program, and logical errors are errors in the logic of your code that cause it to behave incorrectly but not necessarily produce an error.\n\n### Exceptions\n\nIn Python, errors are represented as \"exceptions\". An exception is an object that represents an error condition which you can use to handle things when they go wrong. Exceptions are raised when an error occurs, and can be caught and handled by your program.\n\nWhen an error occurs, an exception is raised, which interrupts the normal flow of the program and transfers control to an exception handler.\n\nHere is an example of an exception being raised:\n\n::: {#527bf40d .cell execution_count=2}\n``` {.python .cell-code}\ndef bmi(weight: float, height: float) -> int:\n    return int(weight / (height**2))\n\nbmi(80, 0)\n```\n\n::: {.cell-output .cell-output-error}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-red-fg\">---------------------------------------------------------------------------</span>\n<span class=\"ansi-red-fg\">ZeroDivisionError</span>                         Traceback (most recent call last)\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[1]</span><span class=\"ansi-green-fg\">, line 4</span>\n<span class=\"ansi-green-fg\">      1</span> <span style=\"font-weight:bold;color:rgb(0,135,0)\">def</span><span style=\"color:rgb(188,188,188)\"> </span><span class=\"ansi-blue-fg\">bmi</span>(weight: <span style=\"color:rgb(0,135,0)\">float</span>, height: <span style=\"color:rgb(0,135,0)\">float</span>) -&gt; <span style=\"color:rgb(0,135,0)\">int</span>:\n<span class=\"ansi-green-fg\">      2</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(weight / (height**<span class=\"ansi-green-fg\">2</span>))\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">4</span> <span class=\"ansi-yellow-bg\">bmi</span><span class=\"ansi-yellow-bg\">(</span><span class=\"ansi-green-fg ansi-yellow-bg\">80</span><span class=\"ansi-yellow-bg\">,</span><span class=\"ansi-yellow-bg\"> </span><span class=\"ansi-green-fg ansi-yellow-bg\">0</span><span class=\"ansi-yellow-bg\">)</span>\n\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[1]</span><span class=\"ansi-green-fg\">, line 2</span>, in <span class=\"ansi-cyan-fg\">bmi</span><span class=\"ansi-blue-fg\">(weight, height)</span>\n<span class=\"ansi-green-fg\">      1</span> <span style=\"font-weight:bold;color:rgb(0,135,0)\">def</span><span style=\"color:rgb(188,188,188)\"> </span><span class=\"ansi-blue-fg\">bmi</span>(weight: <span style=\"color:rgb(0,135,0)\">float</span>, height: <span style=\"color:rgb(0,135,0)\">float</span>) -&gt; <span style=\"color:rgb(0,135,0)\">int</span>:\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">2</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(<span class=\"ansi-yellow-bg\">weight</span><span class=\"ansi-yellow-bg\"> </span><span class=\"ansi-yellow-bg\">/</span><span class=\"ansi-yellow-bg\"> </span><span class=\"ansi-yellow-bg\">(</span><span class=\"ansi-yellow-bg\">height</span><span class=\"ansi-yellow-bg\">*</span><span class=\"ansi-yellow-bg\">*</span><span class=\"ansi-green-fg ansi-yellow-bg\">2</span><span class=\"ansi-yellow-bg\">)</span>)\n\n<span class=\"ansi-red-fg\">ZeroDivisionError</span>: division by zero</pre>\n```\n:::\n\n:::\n:::\n\n\nWe have defined a function `bmi` which calculates the Body Mass Index (BMI) of a person given their weight and height. If we call this function with a height of 0, it will raise a `ZeroDivisionError` exception, because we cannot divide by zero.\n\nWhen we call any block of code that might raise an exception, we can catch and handle that exception using a `try` block. A `try` block is a block of code that might raise an exception, and is followed by one or more `except` blocks that handle that exception.\n\n::: {#005c03e2 .cell execution_count=3}\n``` {.python .cell-code}\ntry:\n    bmi(80, 0)\nexcept ZeroDivisionError:\n    print(\"Invalid height\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nInvalid height\n```\n:::\n:::\n\n\nWe could change the `bmi` function so it returns a BMI of -1 if the height is 0, and then check for this value in the calling code. However, this is not a good solution, because it is not clear that -1 is an invalid value, and it is easy to forget to check for it.\n\nFor arguments sake though, let's see how we could do this.\n\n::: {#01aeb2f0 .cell execution_count=4}\n``` {.python .cell-code}\ndef bmi(weight: float, height: float) -> int:\n    try:\n        return int(weight / (height**2))\n    except ZeroDivisionError:\n        return -1\n    \nbmi(80, 0)\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\n-1\n```\n:::\n:::\n\n\nWe can also raise exceptions ourselves using the `raise` statement. This can be useful if you want to raise an exception in response to a specific condition in your code, in this case we could raise a `ValueError` if the height is 0.\n\n::: {#cd9d1871 .cell execution_count=5}\n``` {.python .cell-code}\ndef bmi(weight: float, height: float) -> int:\n    if height == 0:\n        raise ValueError(\"Invalid height\")\n    return int(weight / (height**2))\n\nbmi(80, 0)\n```\n\n::: {.cell-output .cell-output-error}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-red-fg\">---------------------------------------------------------------------------</span>\n<span class=\"ansi-red-fg\">ValueError</span>                                Traceback (most recent call last)\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[4]</span><span class=\"ansi-green-fg\">, line 6</span>\n<span class=\"ansi-green-fg\">      3</span>         <span style=\"font-weight:bold;color:rgb(0,135,0)\">raise</span> <span style=\"font-weight:bold;color:rgb(215,95,95)\">ValueError</span>(<span class=\"ansi-yellow-fg\">\"</span><span class=\"ansi-yellow-fg\">Invalid height</span><span class=\"ansi-yellow-fg\">\"</span>)\n<span class=\"ansi-green-fg\">      4</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(weight / (height**<span class=\"ansi-green-fg\">2</span>))\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">6</span> <span class=\"ansi-yellow-bg\">bmi</span><span class=\"ansi-yellow-bg\">(</span><span class=\"ansi-green-fg ansi-yellow-bg\">80</span><span class=\"ansi-yellow-bg\">,</span><span class=\"ansi-yellow-bg\"> </span><span class=\"ansi-green-fg ansi-yellow-bg\">0</span><span class=\"ansi-yellow-bg\">)</span>\n\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[4]</span><span class=\"ansi-green-fg\">, line 3</span>, in <span class=\"ansi-cyan-fg\">bmi</span><span class=\"ansi-blue-fg\">(weight, height)</span>\n<span class=\"ansi-green-fg\">      1</span> <span style=\"font-weight:bold;color:rgb(0,135,0)\">def</span><span style=\"color:rgb(188,188,188)\"> </span><span class=\"ansi-blue-fg\">bmi</span>(weight: <span style=\"color:rgb(0,135,0)\">float</span>, height: <span style=\"color:rgb(0,135,0)\">float</span>) -&gt; <span style=\"color:rgb(0,135,0)\">int</span>:\n<span class=\"ansi-green-fg\">      2</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">if</span> height == <span class=\"ansi-green-fg\">0</span>:\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">3</span>         <span style=\"font-weight:bold;color:rgb(0,135,0)\">raise</span> <span style=\"font-weight:bold;color:rgb(215,95,95)\">ValueError</span>(<span class=\"ansi-yellow-fg\">\"</span><span class=\"ansi-yellow-fg\">Invalid height</span><span class=\"ansi-yellow-fg\">\"</span>)\n<span class=\"ansi-green-fg\">      4</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(weight / (height**<span class=\"ansi-green-fg\">2</span>))\n\n<span class=\"ansi-red-fg\">ValueError</span>: Invalid height</pre>\n```\n:::\n\n:::\n:::\n\n\n`ValueError`, `ZeroDivisionError`, and other exceptions are built-in exceptions in Python. You can also define your own exceptions by creating a new class that inherits from the `Exception` class.\n\n:::{.callout-note}\n## About Classes and Objects\n\nThe concept of a \"class\" comes from object-oriented programming, which is a way of organizing and structuring code. We will not cover object-oriented programming here, but you can learn more about it in the [Python documentation](https://docs.python.org/3/tutorial/classes.html). In many cases, you can use classes without understanding how they work, but it can be useful to understand the basics of classes and objects.\n:::\n\nLet us see how we can define our own exception class, and raise an instance of it.\n\n### Creating a custom exception\n\nLet us take the BMI example from previously, and create a custom exception class called `ZeroHeightError` which we can raise when the height is 0.\n\n::: {#ea3d8bec .cell execution_count=6}\n``` {.python .cell-code}\n# Define a new ZeroHeightError exception\nclass ZeroHeightError(ValueError):\n    pass\n\ndef bmi(weight: float, height: float) -> int:\n    if height == 0:\n        raise ZeroHeightError('Invalid height')\n    return int(weight / (height**2))\n\ntry:\n    bmi(80, 0)\nexcept ZeroHeightError as exception:\n    print(exception)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nInvalid height\n```\n:::\n:::\n\n\nAbove we have defined a new class called `ZeroHeightError` which inherits from the `ValueError` class (don't worry about what \"inherits\" means for now). This means that `ZeroHeightError` is a subclass of `ValueError`, and inherits all of its properties and methods.\n\n:::{.callout-note}\n## About Exceptions\n\nIn the vast majority of cases, you can use existing exceptions in Python, and you do not need to define your own exceptions. We are only illustrating how to define your own exceptions here for educational purposes.\n:::\n\n### The `else` and `finally` blocks\n\nIn addition to the `try` and `except` blocks, you can also use `else` and `finally` blocks in a `try` statement. The `else` block is executed if no exceptions are raised in the `try` block, and the `finally` block is always executed, regardless of whether an exception is raised or not.\n\nHere is an example of using the `else` and `finally` blocks:\n\n::: {#a101ff90 .cell execution_count=7}\n``` {.python .cell-code}\ntry:\n    v = bmi(80, 1.75)\nexcept ZeroHeightError as exception:\n    print(exception)\nelse:\n    print(\"Your BMI is\", v)\nfinally:\n    print(\"This is the end of the program\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYour BMI is 26\nThis is the end of the program\n```\n:::\n:::\n\n\nYou can try changing the weight and height parameters to see how the program behaves when an exception is raised, and when it is not.\n\n## Debugging techniques\n\nDebugging is the process of identifying and fixing issues in your code, and code **always** has issues! There are various techniques you can use to help you debug your code, and to help you understand what your code is doing, these include:\n\n- You can use `print` statements to print out the values of variables and the flow of your program. This can help you understand what your code is doing, and identify issues.\n- You can use a debugger to step through your code line-by-line, and inspect the values of variables. Using a debugger is a more advanced technique, but can be very useful for understanding complex code. In this section, we will not cover how to use a debugger, but keep in mind that Jupyter Notebooks has a [built-in debugger that you can use](https://jupyterlab.readthedocs.io/en/stable/user/debugger.html).\n- You can use assertions to check that certain conditions are true at specific points in your code. If an assertion fails, an `AssertionError` exception is raised, which can help you identify problems.\n\n### Using `print` statements\n\nOne of the simplest ways to debug your code is to use `print` statements to print out the values of variables and the flow of your program. This can help you understand what your code is doing, but can become difficult to manage if you have a lot of `print` statements. In most simple cases however, `print` statements are a quick and easy way to debug your code. Here is an example of using `print` statements to debug the BMI example from earlier:\n\n::: {#753acb3a .cell execution_count=8}\n``` {.python .cell-code}\ndef bmi(weight: float, height: float) -> int:\n    print(f'Calculating BMI for weight={weight} and height={height}')\n    if height == 0:\n        raise ZeroHeightError('Invalid height')\n    return int(weight / (height**2))\n\nbmi(80, 1.75)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCalculating BMI for weight=80 and height=1.75\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=7}\n```\n26\n```\n:::\n:::\n\n\n### Assertions\n\nAssertions are a way of checking that certain conditions are true at specific points in your code. If an assertion fails, an `AssertionError` exception is raised, which can help you identify problems. Assertions are a simple way to check that your code is working correctly, and can help you identify issues early on. For example, you could use an assertion to check that the height is not 0 in the BMI example:\n\n::: {#0d93dd64 .cell execution_count=9}\n``` {.python .cell-code}\ndef bmi(weight: float, height: float) -> int:\n    print(f'Calculating BMI for weight={weight} and height={height}')\n    assert height != 0, 'Invalid height'\n    return int(weight / (height**2))\n\nbmi(80, 0)\n\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCalculating BMI for weight=80 and height=0\n```\n:::\n\n::: {.cell-output .cell-output-error}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-red-fg\">---------------------------------------------------------------------------</span>\n<span class=\"ansi-red-fg\">AssertionError</span>                            Traceback (most recent call last)\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[8]</span><span class=\"ansi-green-fg\">, line 6</span>\n<span class=\"ansi-green-fg\">      3</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">assert</span> height != <span class=\"ansi-green-fg\">0</span>, <span class=\"ansi-yellow-fg\">'</span><span class=\"ansi-yellow-fg\">Invalid height</span><span class=\"ansi-yellow-fg\">'</span>\n<span class=\"ansi-green-fg\">      4</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(weight / (height**<span class=\"ansi-green-fg\">2</span>))\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">6</span> <span class=\"ansi-yellow-bg\">bmi</span><span class=\"ansi-yellow-bg\">(</span><span class=\"ansi-green-fg ansi-yellow-bg\">80</span><span class=\"ansi-yellow-bg\">,</span><span class=\"ansi-yellow-bg\"> </span><span class=\"ansi-green-fg ansi-yellow-bg\">0</span><span class=\"ansi-yellow-bg\">)</span>\n\n<span class=\"ansi-cyan-fg\">Cell</span><span class=\"ansi-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[8]</span><span class=\"ansi-green-fg\">, line 3</span>, in <span class=\"ansi-cyan-fg\">bmi</span><span class=\"ansi-blue-fg\">(weight, height)</span>\n<span class=\"ansi-green-fg\">      1</span> <span style=\"font-weight:bold;color:rgb(0,135,0)\">def</span><span style=\"color:rgb(188,188,188)\"> </span><span class=\"ansi-blue-fg\">bmi</span>(weight: <span style=\"color:rgb(0,135,0)\">float</span>, height: <span style=\"color:rgb(0,135,0)\">float</span>) -&gt; <span style=\"color:rgb(0,135,0)\">int</span>:\n<span class=\"ansi-green-fg\">      2</span>     <span style=\"color:rgb(0,135,0)\">print</span>(<span class=\"ansi-yellow-fg\">f</span><span class=\"ansi-yellow-fg\">'</span><span class=\"ansi-yellow-fg\">Calculating BMI for weight=</span><span style=\"font-weight:bold;color:rgb(175,95,135)\">{</span>weight<span style=\"font-weight:bold;color:rgb(175,95,135)\">}</span><span class=\"ansi-yellow-fg\"> and height=</span><span style=\"font-weight:bold;color:rgb(175,95,135)\">{</span>height<span style=\"font-weight:bold;color:rgb(175,95,135)\">}</span><span class=\"ansi-yellow-fg\">'</span>)\n<span class=\"ansi-green-fg\">----&gt; </span><span class=\"ansi-green-fg\">3</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">assert</span> height != <span class=\"ansi-green-fg\">0</span>, <span class=\"ansi-yellow-fg\">'</span><span class=\"ansi-yellow-fg\">Invalid height</span><span class=\"ansi-yellow-fg\">'</span>\n<span class=\"ansi-green-fg\">      4</span>     <span style=\"font-weight:bold;color:rgb(0,135,0)\">return</span> <span style=\"color:rgb(0,135,0)\">int</span>(weight / (height**<span class=\"ansi-green-fg\">2</span>))\n\n<span class=\"ansi-red-fg\">AssertionError</span>: Invalid height</pre>\n```\n:::\n\n:::\n:::\n\n\nAssertions are typically used to check for conditions that should never occur, and if they do occur, it indicates that potentially there is a bug in your code. You can use assertions to check for things like invalid input, unexpected conditions, or other issues that should never happen. In the example above, we are using an assertion to check that the height is not 0, because it should never be 0.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}